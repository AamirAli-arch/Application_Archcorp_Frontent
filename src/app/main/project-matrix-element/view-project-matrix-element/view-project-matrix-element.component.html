<app-loader-spiner></app-loader-spiner>
<div fxLayout="column" fxLayoutAlign="start stretch" fxFlex="50" style="margin: 10px;" class="filter-container">
    <div>
        <h2>Space Matrix Element Details</h2>
        <p>Please provide the details...</p>
    </div>
    <form [formGroup]="elementsForm" fxLayout="column" fxLayoutAlign="space-around stretch">      
        <app-project-dropdown class="resorce-filter" (projectId)="projectId($event)" fxFlex="grow">           
        </app-project-dropdown>
      
        <mat-form-field class="floor" appearance="outline" fxFlex.gt-sm="100" >
            <mat-label>Select Floor Level</mat-label>

            <mat-select required color="primary" formControlName="floorLevel" [(value)]="floorSelected">
                <mat-option *ngFor="let floors of floorLevels" [value]="floors.name">
                    {{floors.name}}
                </mat-option>
            </mat-select>
            <!-- <mat-error *ngIf="elementsForm.controls.floorLevel.errors?.required">Please select floor level.
            </mat-error> -->
        </mat-form-field>


        <mat-form-field appearance="outline" fxFlex="grow">
            <mat-label>Room Id</mat-label>
            <input matInput placeholder="Room Id" formControlName="roomId">
            <!-- <mat-error *ngIf="elementsForm.controls.roomId.errors?.required">Room id is required
            </mat-error> -->
        </mat-form-field>

        
        <mat-form-field class="discipline" appearance="outline" fxFlex.gt-sm="100" >
          <mat-label>Select Discipline</mat-label>
          <mat-select required color="primary" formControlName="discipline" [(value)]="disciplineSelected">

              <mat-option *ngFor="let discipline of disciplines" [value]="discipline.name">
                  {{discipline.name}}
                </mat-option>
              </mat-select>

              <mat-error *ngIf="elementsForm.controls.discipline.errors?.required">Please select discipline.
              </mat-error>
        </mat-form-field>


        <!-- <mat-form-field class="element" appearance="outline" fxFlex.gt-sm="100" >
          <mat-label>Select Element</mat-label>
          <mat-select required color="primary" formControlName="element" [(value)]="elementSelected">

              <mat-option *ngFor="let element of elements" [value]="element.name">
                  {{element.name}}
                </mat-option> 
              </mat-select>
          </mat-form-field> -->

        <!-- Add Item to DropDown -->

            <!-- <mat-form-field >
                <input matInput placeholder="Element" aria-label="Item"  [formControl]="itemCtrl" (keyup.enter)="addOption()">
                <mat-select required color="primary"  (optionSelected)="optionSelected($event.option)">
                  <mat-option *ngFor="let item of filteredItems | async" [value]="item">
                    <span>{{ item }}</span>
                  </mat-option>
                </mat-select>
                <button *ngIf="showAddButton && itemCtrl.value" matSuffix mat-button mat-icon-button (click)="addOption()">
                    <mat-icon matTooltip='Add Element "{{itemCtrl.value}}"'>
                        add
                     </mat-icon></button>
              </mat-form-field> -->

              <!--Add new Version  -->

              <mat-form-field class="example-full-width">
                <input matInput placeholder="Element" #input  >
                <button *ngIf="input.value" matSuffix mat-button mat-icon-button (click)="addNewVersion(input.value)">
                  <mat-icon matTooltip='Add Element "{{input.value}}"'>
                    add
                 </mat-icon>
                </button>
              </mat-form-field>
              <mat-form-field class="element" appearance="outline" fxFlex.gt-sm="100" >
                <mat-label>Select Element</mat-label>
              <mat-select #Version formControlName="element">
                <mat-option *ngFor="let element of elements" [value]="element">{{element}}</mat-option>
                
              </mat-select>
            </mat-form-field>
            
              
            


        <mat-form-field class="level" appearance="outline" fxFlex.gt-sm="100" >
            <mat-label>Select Element Level</mat-label>

            <mat-select required color="primary" formControlName="level" [(value)]="levelSelected" >
                <mat-option *ngFor="let levels of elementLevels" [value]="levels.name">
                    {{levels.name}}
                  </mat-option>
            </mat-select>
            <!-- <mat-error *ngIf="elementsForm.controls.level.errors?.required">Please select element level.
            </mat-error> -->
        </mat-form-field>

        <mat-form-field class="specific" appearance="outline" fxFlex.gt-sm="100" >
            <mat-label>Select Specific Value</mat-label>
            <mat-select required color="primary" formControlName="specific" [(value)]="specificSelected">
                <mat-option *ngFor="let specific of specifics" [value]="specific.name">
                        {{specific.name}}
                </mat-option>
                <!-- <mat-option class="mat-primary" [value]="1">Color</mat-option>
                <mat-option class="mat-primary" [value]="2">Finishing</mat-option>
                <mat-option class="mat-primary" [value]="3">Height</mat-option>                 -->
            </mat-select>
            <!-- <mat-error *ngIf="elementsForm.controls.specific.errors?.required">Please select specific value.
            </mat-error> -->
        </mat-form-field>


        <mat-form-field appearance="outline" fxFlex="grow">
            <mat-label>Material</mat-label>
            <input matInput placeholder="Note" formControlName="material">
            <!-- <mat-error *ngIf="elementsForm.controls.material.errors?.required">Material is required!
            </mat-error> -->
        </mat-form-field>

        <mat-form-field appearance="outline" fxFlex="grow">
            <mat-label>Brand Name</mat-label>
            <input matInput placeholder="Note" formControlName="brand">
            <!-- <mat-error *ngIf="elementsForm.controls.brand.errors?.required">Brand name is required!
            </mat-error> -->
        </mat-form-field>

        <mat-form-field appearance="outline" fxFlex="grow">
            <mat-label>Supplier</mat-label>
            <input matInput placeholder="Note" formControlName="supplier">
            <!-- <mat-error *ngIf="elementsForm.controls.supplier.errors?.required">Supplier name is required!
            </mat-error> -->
        </mat-form-field>

        <mat-form-field appearance="outline" fxFlex="grow">
            <mat-label>Remarks</mat-label>
            <input matInput placeholder="Note" formControlName="remarks">
        </mat-form-field>

        <mat-form-field appearance="outline" fxFlex="grow">
            <mat-label>General Impact</mat-label>
            <input matInput placeholder="Note" formControlName="generalImpact">
            <!-- <mat-error *ngIf="elementsForm.controls.generalImpact.errors?.required">General Impact is required!
            </mat-error> -->
        </mat-form-field>

        <!-- <mat-form-field appearance="outline" fxFlex="grow">
            <mat-label>Discipline</mat-label>
            <input matInput placeholder="Note" formControlName="discipline">
            <mat-error *ngIf="elementsForm.controls.discipline.errors?.required">Discipline is required!
            </mat-error>
        </mat-form-field> -->


        <button type="submit" mat-raised-button color="primary"   (click)="saveMatrix()" >Submit</button>

    </form>
</div>



<dx-data-grid
  id="matrixgridContainer"
  [dataSource]="spaceMatrixDataSource"  
  [remoteOperations]="false"
  [allowColumnReordering]="true"
  [rowAlternationEnabled]="true"
  [showBorders]="true"
  keyExpr="projectId"
  >


  <dxo-paging [pageSize]="10"></dxo-paging>
  <dxo-pager
    [showPageSizeSelector]="true"
    [allowedPageSizes]="[10, 25, 50, 100]">
  </dxo-pager>

  <dxo-search-panel
    [visible]="true"
    [highlightCaseSensitive]="true">    
  </dxo-search-panel>


    <!-- dataField -->
  <dxo-group-panel [visible]="true"></dxo-group-panel>
  <dxo-grouping [autoExpandAll]="true"> </dxo-grouping>
  <dxo-load-panel [enabled]="true"></dxo-load-panel>


  <dxi-column  dataField="level" [groupIndex]="0"></dxi-column>
  <dxi-column  dataField="element" [groupIndex]="1"></dxi-column>
  <dxi-column  dataField="discipline" [groupIndex]="2"></dxi-column>

  <dxi-column dataField="roomId" caption="Room" dataType="number" alignment="right"></dxi-column>
  <dxi-column dataField="floorLevel" caption="Floor Level" dataType="string" alignment="right"></dxi-column>
  <dxi-column dataField="specific" caption="Specification" dataType="string"></dxi-column>
  <dxi-column dataField="material" caption="Material" dataType="string"></dxi-column>
  <dxi-column dataField="brand" caption="Brand" dataType="string"></dxi-column>
  <dxi-column dataField="supplier" caption="Supplier" dataType="string"></dxi-column>
  <dxi-column dataField="generalImpact" caption="General Impact" dataType="string"></dxi-column>
  <dxi-column dataField="remarks" caption="Remarks" dataType="string"></dxi-column>
  

  <!-- <dxo-toolbar>
    <dxi-item location="before">
        <div *dxTemplate>
          <dx-button
            [text]="this.expanded ? 'Collapse All' : 'Expand All'"
            width="136"
            (onClick)="collapseAllClick($event)"
          >
          </dx-button>
        </div>
      </dxi-item>
    </dxo-toolbar> -->

<!--
    <dxi-item location="after">
        <div *dxTemplate>
          <dx-button icon="refresh" (onClick)="refreshDataGrid($event)">
          </dx-button>
        </div>
      </dxi-item>
-->
<!-- <dxo-selection mode="multiple"></dxo-selection>
<dxo-paging [pageSize]="10"></dxo-paging>
<dxo-grouping [autoExpandAll]="true"></dxo-grouping>
<dxo-export
  [enabled]="true"  
  [allowExportSelectedData]="true"
></dxo-export> -->

</dx-data-grid>

  
